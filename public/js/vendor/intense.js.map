{"version":3,"sources":["intense.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"intense.js","sourcesContent":["window.requestAnimFrame = (function(){\n  return  window.requestAnimationFrame       ||\n          window.webkitRequestAnimationFrame ||\n          window.mozRequestAnimationFrame    ||\n          function( callback ){\n            window.setTimeout(callback, 1000 / 60);\n          };\n})();\n\nwindow.cancelRequestAnimFrame = ( function() {\n    return window.cancelAnimationFrame          ||\n        window.webkitCancelRequestAnimationFrame    ||\n        window.mozCancelRequestAnimationFrame       ||\n        window.oCancelRequestAnimationFrame     ||\n        window.msCancelRequestAnimationFrame        ||\n        clearTimeout\n} )();\n\n\nvar Intense = (function() {\n\n    'use strict';\n\n    var KEYCODE_ESC = 27;\n\n    // Track both the current and destination mouse coordinates\n    // Destination coordinates are non-eased actual mouse coordinates\n    var mouse = { xCurr:0, yCurr:0, xDest: 0, yDest: 0 };\n\n    var horizontalOrientation = true;\n\n    // Holds the animation frame id.\n    var looper;\n  \n    // Current position of scrolly element\n    var lastPosition, currentPosition = 0;\n    \n    var sourceDimensions, target;\n    var targetDimensions = { w: 0, h: 0 };\n  \n    var container;\n    var containerDimensions = { w: 0, h:0 };\n    var overflowArea = { x: 0, y: 0 };\n\n    // Overflow variable before screen is locked.\n    var overflowValue;\n\n    /* -------------------------\n    /*          UTILS\n    /* -------------------------*/\n\n    // Soft object augmentation\n    function extend( target, source ) {\n\n        for ( var key in source )\n\n            if ( !( key in target ) )\n\n                target[ key ] = source[ key ];\n\n        return target;\n    }\n\n    // Applys a dict of css properties to an element\n    function applyProperties( target, properties ) {\n\n      for( var key in properties ) {\n        target.style[ key ] = properties[ key ];\n      }\n    }\n\n    // Returns whether target a vertical or horizontal fit in the page.\n    // As well as the right fitting width/height of the image.\n    function getFit( \n\n      source ) {\n\n      var heightRatio = window.innerHeight / source.h;\n\n      if( (source.w * heightRatio) > window.innerWidth ) {\n        return { w: source.w * heightRatio, h: source.h * heightRatio, fit: true };\n      } else {\n        var widthRatio = window.innerWidth / source.w;\n        return { w: source.w * widthRatio, h: source.h * widthRatio, fit: false };\n      }\n    }\n\n    /* -------------------------\n    /*          APP\n    /* -------------------------*/\n\n    function startTracking( passedElements ) {\n\n      var i;\n\n      // If passed an array of elements, assign tracking to all.\n      if ( passedElements.length ) {\n\n        // Loop and assign\n        for( i = 0; i < passedElements.length; i++ ) {\n          track( passedElements[ i ] );\n        }\n\n      } else {\n          track( passedElements );\n      }\n    }\n\n    function track( element ) {\n\n      // Element needs a src at minumun.\n      if( element.getAttribute( 'data-image') || element.src ) {\n        element.addEventListener( 'click', function() {\n          init( this );\n        }, false );\n      }\n    }\n  \n    function start() { \n      loop();\n    }\n   \n    function stop() {\n      cancelRequestAnimFrame( looper );\n    }\n\n    function loop() {\n        looper = requestAnimFrame(loop);\n        positionTarget();      \n    }\n\n    // Lock scroll on the document body.\n    function lockBody() {\n\n      overflowValue = document.body.style.overflow;\n      document.body.style.overflow = 'hidden';\n    }\n\n    // Unlock scroll on the document body.\n    function unlockBody() {\n      document.body.style.overflow = overflowValue;\n    }\n\n    function createViewer( title, caption ) {\n\n      /*\n       *  Container\n       */\n      var containerProperties = {\n        'backgroundColor': 'rgba(0,0,0,0.8)',\n        'width': '100%',\n        'height': '100%',\n        'position': 'fixed',\n        'top': '0px',\n        'left': '0px',\n        'overflow': 'hidden',\n        'zIndex': '999999',\n        'margin': '0px',\n        'webkitTransition': 'opacity 150ms cubic-bezier( 0, 0, .26, 1 )',\n        'MozTransition': 'opacity 150ms cubic-bezier( 0, 0, .26, 1 )',\n        'transition': 'opacity 150ms cubic-bezier( 0, 0, .26, 1 )',\n        'opacity': '0'\n      }\n      container = document.createElement( 'figure' );\n      container.appendChild( target );\n      applyProperties( container, containerProperties );\n\n      var imageProperties = {\n        'cursor': 'url( \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo3Q0IyNDI3M0FFMkYxMUUzOEQzQUQ5NTMxMDAwQjJGRCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo3Q0IyNDI3NEFFMkYxMUUzOEQzQUQ5NTMxMDAwQjJGRCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjdDQjI0MjcxQUUyRjExRTM4RDNBRDk1MzEwMDBCMkZEIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjdDQjI0MjcyQUUyRjExRTM4RDNBRDk1MzEwMDBCMkZEIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+soZ1WgAABp5JREFUeNrcWn9M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\" ) 25 25, no-drop'\n      }\n      applyProperties( target, imageProperties );\n\n      /*\n       *  Caption Container\n       */\n      var captionContainerProperties = {\n        'fontFamily': 'Georgia, Times, \"Times New Roman\", serif',\n        'position': 'fixed',\n        'bottom': '0px',\n        'left': '0px',\n        'padding': '20px',\n        'color': '#fff',\n        'wordSpacing': '0.2px',\n        'webkitFontSmoothing': 'antialiased',\n        'textShadow': '-1px 0px 1px rgba(0,0,0,0.4)'\n      }\n      var captionContainer = document.createElement( 'figcaption' );\n      applyProperties( captionContainer, captionContainerProperties );\n\n      /*\n       *  Caption Title\n       */\n      if ( title ) {\n        var captionTitleProperties = {\n          'margin': '0px',\n          'padding': '0px',\n          'fontWeight': 'normal',\n          'fontSize': '40px',\n          'letterSpacing': '0.5px',\n          'lineHeight': '35px',\n          'textAlign': 'left'\n        }\n        var captionTitle = document.createElement( 'h1' );\n        applyProperties( captionTitle, captionTitleProperties );\n        captionTitle.innerHTML = title;\n        captionContainer.appendChild( captionTitle );\n      }\n\n      if ( caption ) {\n        var captionTextProperties = {\n          'margin': '0px',\n          'padding': '0px',\n          'fontWeight': 'normal',\n          'fontSize': '20px',\n          'letterSpacing': '0.1px',\n          'maxWidth': '500px',\n          'textAlign': 'left',\n          'background': 'none',\n          'marginTop': '5px'\n        }\n        var captionText = document.createElement( 'h2' );\n        applyProperties( captionText, captionTextProperties );\n        captionText.innerHTML = caption;\n        captionContainer.appendChild( captionText );\n      }\n\n      container.appendChild( captionContainer );\n\n      setDimensions();\n\n      mouse.xCurr = mouse.xDest = window.innerWidth / 2;\n      mouse.yCurr = mouse.yDest = window.innerHeight / 2;\n      \n      document.body.appendChild( container );\n      setTimeout( function() {\n        container.style[ 'opacity' ] = '1';\n      }, 10);\n    }\n\n    function removeViewer() {\n\n      unlockBody();\n      unbindEvents();\n      stop();\n      document.body.removeChild( container );\n    }\n\n    function setDimensions() {\n\n      // Manually set height to stop bug where \n      var imageDimensions = getFit( sourceDimensions );\n      target.width = imageDimensions.w;\n      target.height = imageDimensions.h;\n      horizontalOrientation = imageDimensions.fit;\n\n      targetDimensions = { w: target.width, h: target.height };\n      containerDimensions = { w: window.innerWidth, h: window.innerHeight };\n      overflowArea = {x: containerDimensions.w - targetDimensions.w, y: containerDimensions.h - targetDimensions.h};\n\n    }\n\n    function init( element ) {\n\n      var imageSource = element.getAttribute( 'data-image') || element.src;\n      var title = element.getAttribute( 'data-title');\n      var caption = element.getAttribute( 'data-caption');\n      \n      var img = new Image();\n      img.onload = function() {\n\n        sourceDimensions = { w: img.width, h: img.height }; // Save original dimensions for later.\n        target = this;\n        createViewer( title, caption );\n        lockBody();\n        bindEvents();\n        loop();\n      }\n\n      img.src = imageSource;\n    }\n\n    function bindEvents() {\n\n      container.addEventListener( 'mousemove', onMouseMove,   false );\n      container.addEventListener( 'touchmove', onTouchMove,   false );\n      window.addEventListener(    'resize',    setDimensions, false );\n      window.addEventListener(    'keyup',     onKeyUp,       false );\n      target.addEventListener(    'click',     removeViewer,  false );\n    }\n\n    function unbindEvents() {\n\n      container.removeEventListener( 'mousemove', onMouseMove,   false );\n      container.removeEventListener( 'touchmove', onTouchMove,   false);\n      window.removeEventListener(    'resize',    setDimensions, false );\n      window.removeEventListener(    'keyup',     onKeyUp,       false );\n      target.removeEventListener(    'click',     removeViewer,  false )\n    }\n  \n    function onMouseMove( event ) {\n\n      mouse.xDest = event.clientX;\n      mouse.yDest = event.clientY;\n    }\n\n    function onTouchMove( event ) {\n\n      event.preventDefault(); // Needed to keep this event firing.\n      mouse.xDest = event.touches[0].clientX;\n      mouse.yDest = event.touches[0].clientY;\n    }\n\n    // Exit on excape key pressed;\n    function onKeyUp( event ) {\n\n      event.preventDefault();\n      if ( event.keyCode === KEYCODE_ESC ) {\n        removeViewer();\n      } \n    }\n  \n    function positionTarget() {\n\n      mouse.xCurr += ( mouse.xDest - mouse.xCurr ) * 0.05;\n      mouse.yCurr += ( mouse.yDest - mouse.yCurr ) * 0.05;\n\n      if ( horizontalOrientation === true ) {\n\n        // HORIZONTAL SCANNING\n        currentPosition += ( mouse.xCurr - currentPosition );\n        if( mouse.xCurr !== lastPosition ) {\n          var position = parseFloat( currentPosition / containerDimensions.w );\n          position = overflowArea.x * position;\n          target.style[ 'webkitTransform' ] = 'translate3d(' + position + 'px, 0px, 0px)';\n          target.style[ 'MozTransform' ] = 'translate3d(' + position + 'px, 0px, 0px)';\n          target.style[ 'msTransform' ] = 'translate3d(' + position + 'px, 0px, 0px)';\n          lastPosition = mouse.xCurr;\n        }\n      } else if ( horizontalOrientation === false ) {\n\n        // VERTICAL SCANNING\n        currentPosition += ( mouse.yCurr - currentPosition );\n        if( mouse.yCurr !== lastPosition ) {\n          var position = parseFloat( currentPosition / containerDimensions.h );\n          position = overflowArea.y * position;\n          target.style[ 'webkitTransform' ] = 'translate3d( 0px, ' + position + 'px, 0px)';\n          target.style[ 'MozTransform' ] = 'translate3d( 0px, ' + position + 'px, 0px)';\n          target.style[ 'msTransform' ] = 'translate3d( 0px, ' + position + 'px, 0px)';\n          lastPosition = mouse.yCurr;\n        }\n      }\n    }\n\n    function main( element ) {\n\n      // Parse arguments\n\n      if ( !element ) {\n        throw 'You need to pass an element!';\n      }\n\n      startTracking( element );\n    }\n\n    return extend( main, {\n        resize: setDimensions,\n        start: start,\n        stop: stop\n    });\n\n})();"],"sourceRoot":"/source/"}